<div fxLayout="column" fxLayoutAlign="center center">
    <mat-card fxLayout="column" class="container-bloc">
        <form fxLayout="column" fxLayoutGap="10px" [formGroup]="referentielForm" *ngIf="referentielForm"
            (ngSubmit)="onSubmitForm()">
            <div fxLayout="row" fxLayoutGap="10px" fxLayout.lt-sm="column">
                <div fxLayout="column" fxFlex="50">
                    <mat-form-field appearance="outline">
                        <mat-label>Libellé</mat-label>
                        <input matInput formControlName="libelle">
                        <mat-error
                            *ngIf="referentielForm.controls.libelle.errors && referentielForm.controls.libelle.errors.required">
                            *Champs Obligatoire</mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Présentation</mat-label>
                        <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="3"
                            formControlName="presentation"></textarea>
                        <mat-error
                            *ngIf="referentielForm.controls.presentation.errors && referentielForm.controls.presentation.errors.required">
                            *Champs Obligatoire</mat-error>
                    </mat-form-field>
                    <mat-form-field class="example-chip-list" appearance="outline">
                        <mat-label>Critères d'évaluation</mat-label>
                        <mat-chip-list #chipList aria-label="">
                            <mat-chip *ngFor="let ce of critereEvaluationList" [removable]="removable"
                                (removed)="remove(ce, critereEvaluationList)">
                                {{ce}}
                                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                            </mat-chip>
                            <input placeholder="Nouveau Critère..." [matChipInputFor]="chipList" appearence="outline"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                                (matChipInputTokenEnd)="addCe($event)">
                        </mat-chip-list>
                    </mat-form-field>

                </div>

                <div fxLayout="column" fxFlex="50">

                    <mat-form-field class="example-chip-list" appearance="outline">
                        <mat-label>Critères d'admission</mat-label>
                        <mat-chip-list #chipList2 aria-label="">
                            <mat-chip *ngFor="let ca of critereAdmissionList" [removable]="removable"
                                (removed)="remove(ca, critereAdmissionList)">
                                {{ca}}
                                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                            </mat-chip>
                            <input placeholder="Nouveau Critère..." [matChipInputFor]="chipList2" appearence="outline"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                                (matChipInputTokenEnd)="addCa($event)">
                        </mat-chip-list>
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Groupe de compétences</mat-label>
                        <mat-select [formControl]="gcControl" multiple (change)="addGc()">

                            <mat-select-trigger>
                                <mat-chip-list>
                                    <mat-chip *ngFor="let gc  of gcControl.value" [removable]="true"
                                        (removed)="remove(gc, gcControl.value)">
                                        {{ gc }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                </mat-chip-list>
                            </mat-select-trigger>

                            <mat-option *ngFor="let gcLibelle of gcLibelles" [value]="gcLibelle">
                                {{gcLibelle}}
                            </mat-option>

                        </mat-select>
                    </mat-form-field>
                    <mat-label>Programme</mat-label>
                    <input type="file" name="programme" (change)="onFileSelect($event)">
                    <!--                
            <mat-error
                *ngIf="referentielForm.controls.programme.errors && referentielForm.controls.programme.errors.required">
                *Programme Obligatoire</mat-error> -->
                    <mat-error
                        *ngIf="referentielForm.controls.programme.errors && referentielForm.controls.programme.errors.requiredFileType">
                        *Type de fichier invalide</mat-error>
                </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="center">
                <div fxLayout="column" fxFlex="50" fxLayoutGap="10px">
                    <button mat-raised-button color="primary" type="submit"
                        [disabled]="!referentielForm.valid">Créer</button>
                    <button mat-raised-button color="accent" type="reset" (click)="onCancelAdd()">Annuler</button>
                </div>
            </div>
        </form>
    </mat-card>
</div>